import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketAddress;


public class Server extends Thread{

	Socket sock;
	
	public Server(Socket sock){
		this.sock = sock;
	}
	
	public void run(){
		
		OutputStream os =null;
		
		try {
			SocketAddress addr= sock.getRemoteSocketAddress();
			System.out.println(addr.toString());
			os =sock.getOutputStream();
//			java.net.InetAddress iaddr=addr;
			//
			os.write("hello world..".getBytes());
			os.flush();
		} catch (IOException e) {
			e.printStackTrace();
		}finally{
			try {
				if(os!=null)os.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}
	
	public static void main(String[] args) {
		int port =8080;
		ServerSocket serv=null;
		
		try {
			serv=new ServerSocket(port);
			while(true){
				Socket sock = serv.accept();
				Server thr=new Server(sock);
				thr.start();
			}
		} catch (IOException e) {
			e.printStackTrace();
		}finally{
			try {
				if(serv!=null)serv.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}

}
